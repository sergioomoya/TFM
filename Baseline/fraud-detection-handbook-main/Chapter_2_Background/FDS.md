(Fraud_Detection_System)=
# Sistema de detección de fraude con tarjetas de crédito

Un sistema de detección de fraude (FDS) con tarjetas de crédito generalmente se compone de un conjunto de cinco capas de control {cite}`dal2017credit,dal2015adaptive`, como se ilustra en la Fig. 1. 
![alt text](./images/FDS.jpg)
<p style="text-align: center;">
Fig. 1. Diagrama que ilustra las capas de control en un FDS. Nuestro enfoque en este libro se centra principalmente en el modelo basado en datos, que ayuda a los investigadores al generar alertas sobre las transacciones más sospechosas.
</p>

Las dos primeras capas (*Terminal* y *Reglas de bloqueo de transacciones*) se ejecutan en tiempo real (es decir, en milisegundos y antes de la autorización). Las siguientes dos capas (*Reglas de puntuación* y *Modelo basado en datos (DDM)*), se ejecutan casi en tiempo real para bloquear potencialmente la tarjeta y evitar fraudes adicionales. Finalmente, la última capa (Investigadores) es la única que requiere intervención humana y se realiza fuera de línea. Describimos cada una de estas capas con más detalle a continuación.

## Terminal

El terminal representa la primera capa de control en un FDS y realiza controles de seguridad convencionales en todas las solicitudes de pago {cite}`mekterovic2018systematic,VANVLASSELAER201538`. Los controles de seguridad incluyen controlar el código PIN (posible solo en caso de tarjetas provistas con chip), el número de intentos, el estado de la tarjeta (ya sea activa o bloqueada), el saldo disponible y el límite de gasto. Estas operaciones deben realizarse en tiempo real (la respuesta debe proporcionarse en unos pocos milisegundos), durante los cuales el terminal consulta a un servidor de la empresa emisora de la tarjeta. Las solicitudes que no pasan ninguno de estos controles son denegadas, mientras que las demás se convierten en solicitudes de transacción que son procesadas por la segunda capa de control.

## Reglas de bloqueo de transacciones 

Las reglas de bloqueo de transacciones son declaraciones *si-entonces (-si no)* destinadas a bloquear solicitudes de transacción que se perciben como fraudes {cite}`dal2017credit,dal2015adaptive`. Estas reglas utilizan la información disponible cuando se solicita el pago, sin analizar registros históricos o perfiles de titulares de tarjetas. Un ejemplo de una regla de bloqueo podría ser: *“SI transacciones por internet Y sitio web no seguro ENTONCES denegar la transacción”*. En la práctica, se ejecutan simultáneamente varias reglas de bloqueo de transacciones, y las transacciones que activan cualquiera de estas reglas se bloquean (aunque las tarjetas no se desactivan). Las reglas de bloqueo de transacciones son diseñadas manualmente por el investigador y, como tales, son componentes *basados en expertos* del FDS. Para garantizar operaciones en tiempo real y evitar bloquear muchas transacciones genuinas, las reglas de bloqueo deben ser: i) rápidas de calcular y ii) muy precisas, es decir, deben generar muy pocas falsas alarmas.

Todas las transacciones que pasan las reglas de bloqueo finalmente se autorizan. Sin embargo, la actividad de detección de fraude continúa después de haber enriquecido los datos de las transacciones con características agregadas utilizadas para contextualizar la compra actual con respecto a las anteriores y el perfil del titular de la tarjeta. Estas características agregadas incluyen, por ejemplo, el gasto promedio, el número promedio de transacciones en el mismo día o la ubicación de las compras anteriores {cite}`dal2015adaptive,VANVLASSELAER201538,whitrow2009transaction`. El proceso de cálculo de características agregadas se denomina *ingeniería de características* o *aumento de características*. Las características aumentadas y los datos de la transacción actual se apilan en un *vector de características* que se supone que es informativo para determinar si la transacción autorizada es fraudulenta o genuina. Las capas *Reglas de puntuación* y *Modelo basado en datos (DDM)* del FDS operan sobre este vector de características.

## Reglas de puntuación 

Las reglas de puntuación también son modelos basados en expertos que se expresan como declaraciones *si-entonces (-si no)* {cite}`carcillo2018scarff,dal2017credit`. Sin embargo, estas operan en vectores de características y asignan una puntuación a cada transacción autorizada: cuanto mayor sea la puntuación, más probable es que la transacción sea un fraude. Las reglas de puntuación son diseñadas manualmente por investigadores, que definen arbitrariamente sus puntuaciones asociadas. Un ejemplo de una regla de puntuación puede ser *“SI transacción anterior en un continente diferente Y menos de una hora desde la transacción anterior ENTONCES puntuación de fraude = 0.95”*. Desafortunadamente, las reglas de puntuación solo pueden detectar estrategias fraudulentas que ya han sido descubiertas por los investigadores y que exhiben patrones que involucran pocos componentes de los vectores de características. Además, las reglas de puntuación son bastante subjetivas, ya que diferentes expertos diseñan reglas diferentes. Finalmente, pueden estar incompletas y son difíciles de mantener a lo largo del tiempo.

## Modelo basado en datos (DDM) 

Esta capa se basa puramente en datos y adopta un clasificador u otro modelo estadístico para estimar la probabilidad de que cada vector de características sea un fraude. Esta probabilidad se utiliza como la puntuación de fraude asociada con las transacciones autorizadas. Por lo tanto, el modelo basado en datos se entrena a partir de un conjunto de transacciones etiquetadas y no puede ser interpretado ni modificado manualmente por los investigadores. Se espera que un modelo efectivo basado en datos detecte patrones fraudulentos analizando simultáneamente múltiples componentes del vector de características, posiblemente a través de expresiones no lineales. Por lo tanto, se espera que el DDM encuentre fraudes de acuerdo con reglas que van más allá de la experiencia del investigador y que no necesariamente corresponden a reglas interpretables {cite}`dal2015adaptive,carcillo2018beyond`.

## Investigadores 

Los investigadores son profesionales con experiencia en el análisis de transacciones con tarjetas de crédito y son responsables de las capas del FDS basadas en expertos. En particular, los investigadores diseñan reglas de bloqueo de transacciones y de puntuación.

Los investigadores también están a cargo de controlar las alertas generadas por las reglas de puntuación y el DDM, para determinar si estas corresponden a fraudes o falsas alarmas {cite}`dal2015adaptive`. En particular, visualizan todas las transacciones sospechosas en una herramienta de gestión de casos, donde se informa toda la información sobre la transacción, incluidas las puntuaciones/probabilidades asignadas, que en la práctica indican cuán *arriesgada* es cada transacción. Los investigadores llaman a los titulares de tarjetas y, después de haber verificado, asignan la etiqueta "genuina" o "fraudulenta" a la transacción alertada y devuelven esta información al FDS. En lo sucesivo, nos referimos a estas transacciones etiquetadas como comentarios (feedbacks) y utilizamos el término interacción alerta-comentario para describir este mecanismo que produce información supervisada en un FDS del mundo real.

Cualquier tarjeta sospechosa de fraude se bloquea inmediatamente para evitar más actividades fraudulentas. Por lo general, los investigadores verifican todas las transacciones recientes de una tarjeta comprometida, lo que significa que cada fraude detectado puede generar potencialmente más de un comentario, que no necesariamente corresponde a alertas o fraudes. En un FDS del mundo real, los investigadores solo pueden verificar pocas alertas por día {cite}`KRIVKO20106070,dal2015adaptive,carcillo2018beyond` ya que este proceso puede ser largo y tedioso. Por lo tanto, el objetivo principal de un DDM es devolver alertas precisas, ya que los investigadores podrían ignorar más alertas cuando se informan demasiadas falsas alarmas.

En los sistemas recientes, las transacciones asociadas con puntuaciones de riesgo muy alto pueden eludir a los investigadores y enviarse directamente al titular de la tarjeta para solicitudes de comentarios (por ejemplo, por SMS). Esta adición es interesante para un procesamiento acelerado y un mayor ancho de banda de comentarios. Sin embargo, debe hacerse con precaución para evitar poner en peligro la confianza del cliente.
